<html lang="en">
    <head>
        <title>DAIV Haptic</title>
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Audiowide&display=swap');

            @keyframes title {
                0% {color: #ffb700}
                50% {color: #ffdc97}
                100% {color: #ffb700}
            }

            @keyframes generating {
                0%{background-position:0% 25%}
                50%{background-position:50% 0%}
                100%{background-position:0% 25%}
            }

            @keyframes usr-glow {
                0% {background-color: #00f2ff}
                50% {background-color: #ffffff}
                100% {background-color: #00f2ff}
            }

            @keyframes stop-glow {
                0% {background-color: #ff6f6f}
                50% {background-color: #ff0000}
                100% {background-color: #ff6f6f}
            }

            @keyframes appear {
                0% {opacity: 0%;margin-top: 50px}
                to {opacity: 100%;margin-top: 10px;}
            }

            @keyframes title-appear {
                0% {opacity: 0%;margin-left: 50px}
                to {opacity: 100%;margin-left: 0px;}
            }

            .title {
                animation: title-appear 1s ease-out;
            }

            h1 {
                font-family: 'audiowide', 'menlo', 'monaco', 'monospaced';
                color: #ffb700;
                animation: title 3s ease-in-out infinite;
            }

            h2 {
                font-family: 'audiowide', 'menlo', 'monaco', 'monospaced';
                color: #ffb700;
                animation: title 5s ease-in-out infinite;
                font-size: 15px;
            }

            .aimsg {
                float:left;
                background-image: linear-gradient(42.74deg,rgb(255, 196, 0), rgba(255, 210, 64, 0.723));
                padding: 10px;
                width:65%;
                color: black;
                border-radius: 20px;
                font-family: 'audiowide';
                text-align: left;
                box-shadow: rgb(1,1,0,0.5) 0px 5px 20px;
                margin-top: 10px;
                animation: appear 1s ease-out;
            }

            .usrmsg {
                float:right;
                background-image: linear-gradient(-42.74deg,rgb(0, 81, 255), rgba(108, 253, 255, 0.528));
                padding: 10px;
                text-align: right;
                width:45%;
                color: black;
                border-radius: 20px;
                font-family: 'audiowide';
                box-shadow: rgb(1,1,0,0.5) 0px 5px 20px;
                margin-top: 10px;
                animation: appear 1s ease-out;
            }

            .usrmsg > input {
                background-color: rgba(0,0,0,0);
                border: 0px;
                width:100%;
                border-radius: 20px;
                font-family: 'audiowide';
                text-align: right;
                animation: usr-glow 5s ease-in-out infinite;
                margin:2px
            }

            .usrmsg > button {
                float: center;
                background-color: rgba(0,0,0,0);
                border: 0px;
                width:20%;
                border-radius: 20px;
                font-family: 'audiowide';
                animation: usr-glow 10s ease-in-out infinite;
                margin:2px
            }
        </style>
    </head>
    <body>
        <div id="chat">
            <div class="title">
                <h1>DAIV Haptic</h1>
                <h2>Desgined and developed by <a href="https://nonasoft.site" style="font-family: audiowide, menlo, monaco, monospaced !important; background-image:linear-gradient(750deg,white, black); background-clip: text; -webkit-text-fill-color:black; -webkit-text-stroke: 0.175em transparent;">NonaSoft</a></h2>
            </div>

            <div class="usrmsg" id="usrinput">
                <input type="text" id="input">
                <button onclick="sendMsg()">Send</button>
            </div>
        </div>
    
        <script>
            let count = 1
            const typeBox = `
                <div class="usrmsg" id="usrinput">
                    <input type="text" id="input">
                    <button onclick="sendMsg()">Send</button>
                </div>`
            const generating = `
                <div class="aimsg" id="aimsg">
                    <span>
                        ...
                    </span>
                </div>`
            async function sendMsg() {
                const input = document.getElementById("input").value
                if (!input) {
                    return null
                }
                document.getElementById("usrinput").innerHTML = (`<span>${input}</span>`)
                document.getElementById("usrinput").id = "msg" + count
                document.getElementById("chat").insertAdjacentHTML('beforeend', generating + typeBox)
                
                const msg = fetch(`/api/chat?msg=${encodeURIComponent(input)}`)
                document.getElementById("aimsg").textContent = e.data
                document.getElementById("aimsg").id = "aimsg" + count
                count++
            }
        </script>
    </body>
</html>